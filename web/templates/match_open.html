<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="=ie=edge">
    <title>Astro Love</title>
    <link rel="stylesheet" href="/static/css/match_open.css">
    <link rel="stylesheet" href="/static/css/footer.css">
</head>
<body>
    <div class="match-card">
        <div style="text-align: left;"><img src="/static/img/marker_back.png" style="width:7%;" onclick="window.location.href='/match'"/></div>
        <div class="zodiac-icon"><img src="{{ selected_match.partner_sign_path }}" style="width:30%; margin:auto;" /></div>
        <div class="zodiac-sign">{{ selected_match.partner_sign }} <a href="#sign" class="question">?</a></div>
        <div class="compatibility">–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: <strong>{{ selected_match.result_compatibility }}%</strong> <a href="#compatibility" class="question">?</a></div>
        <a href="#" class="goal" style="pointer-events: none;">{{ selected_match.searching }}</a>

        <div class="location">{{ selected_match.location }}</div>

        <div class="section" style="text-align: center;margin:10px 15px;">
            <h3>–¢–∏–ø –æ—Ç–Ω–æ—à–µ–Ω–∏–π </h3>
            <p>{{ selected_match.relation_type }} <a href="#relation_type" class="question">?</a></p>
        </div>
        <details>
            <summary>–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</summary>
            <div class="section">
                <h3>üß† –û —Å–µ–±–µ</h3>
                <p>{{ selected_match.about_me }}</p>
            </div>

            <div class="section">
                <h3>üîì –°—Ç–∞—Ç—É—Å</h3>
                <p>{{ selected_match.partner_status }}</p>
            </div>

            <div class="section">
                <h3>üß© –ò–Ω—Ç–µ—Ä–µ—Å—ã</h3>
                <div class="tags">
                    {% for interest in partner_interests %}
                        <div class="tag">{{ interest }}</div>
                    {% endfor %}
                </div>
            </div>

            <div class="section">
                <h3 style="margin-bottom: 10px;">üíå –ú–æ–∂–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å</h3>
                <div class="tags">
                    {% for give in partner_gives %}
                        <div class="tag">{{ give }}</div>
                    {% endfor %}
                </div>
            </div>

            <div class="section">
                <h3>ü§≤ –•–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å</h3>
                <div class="tags">
                    {% for gets in partner_gets %}
                        <div class="tag">{{ gets }}</div>
                    {% endfor %}
                </div>
            </div>

            <div class="section">
                <h3>üî• –í–Ω–µ—à–Ω–æ—Å—Ç—å</h3>
                <div class="tags">
                    {% if partner_appearance %}
                        <div class="tag">{{ partner_appearance.height }} —Ä–æ—Å—Ç</div> 
                        <div class="tag">{{ partner_appearance.physique }} —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ</div>
                        {% if partner_appearance.hair_color == "–ë–ª–æ–Ω–¥–∏–Ω" or partner_appearance.hair_color == "–ë—Ä—é–Ω–µ—Ç" or partner_appearance.hair_color == "–®–∞—Ç–µ–Ω"%}
                            <div class="tag">{{ partner_appearance.hair_color }}, {{ partner_appearance.hair_type | lower }} –≤–æ–ª–æ—Å—ã</div> 
                        {% elif partner_appearance.hair_color == "–†—É—Å—ã–µ" or partner_appearance.hair_color == "–†—ã–∂–∏–µ" or partner_appearance.hair_color == "–°–µ–¥—ã–µ" or partner_appearance.hair_color == "–ö—Ä–∞—à–µ–Ω—ã–µ" %}
                            <div class="tag">{{ partner_appearance.hair_color }} {{ partner_appearance.hair_type | lower }} –≤–æ–ª–æ—Å—ã</div> 
                        {% else %}
                            <div class="tag">{{ partner_appearance.hair_color }}</div> 
                        {% endif %}
                        <div class="tag">{{ partner_appearance.skin_color }} –∫–æ–∂–∞</div> 
                        <div class="tag">{{ partner_appearance.face_type }}</div> 
                        {% if partner_appearance.tattoos == "–ï—Å—Ç—å" %}
                            <div class="tag">{{ partner_appearance.tattoos }} —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏</div> 
                        {% else %}
                            <div class="tag">{{ partner_appearance.tattoos }} —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫</div> 
                        {% endif %}
                    {% else %}
                        <div>–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è</div> 
                    {% endif %}
                </div>
            </div>

            <div class="section">
                <h3>‚≠êÔ∏è –•–∞—Ä–∞–∫—Ç–µ—Ä</h3>
                <div class="tags">
                    {% for character in partner_character %}
                        <div class="tag">{{ character }}</div>
                    {% endfor %}	
                </div>
            </div>
        </details>
        {% if selected_match.status == "–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ" or selected_match.status == "–Ω–æ–≤—ã–π" %}
            <div class="agreement" style="display: flex;flex-direction: row;justify-content: space-between;">
                <div><img class="agree" src="/static/img/yes.png" style="width:45%; margin:auto;"></div>
                <div><img class="deny" src="/static/img/no.png" style="width:45%; margin:auto;"></div>
            </div>
        {% elif selected_match.status == "–Ω–µ—Ç –º—ç—Ç—á–∞" %}
            <div class="status"><p style="text-align:center; color:#d880d1; padding: 10px 20px; border: 1px solid #d880d1;border-radius: 15px;color: #d2ccff;">–î–∞–Ω–Ω—ã–π –º—ç—Ç—á –±—ã–ª –æ—Ç–∫–ª–æ–Ω–µ–Ω ‚ùåÔ∏è</div>
        {% elif selected_match.status == "–æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞" %}
            <div class="status"><p style="text-align:center; color:#d880d1; padding: 10px 20px; border: 1px solid #d880d1;border-radius: 15px;color: #d2ccff;">‚åö –û–∂–∏–¥–∞–µ–º –æ—Ç–≤–µ—Ç–∞ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..</div>
        {% elif selected_match.status == "–º—ç—Ç—á" %}
            <div class="status"><p style="text-align:center; color:#d880d1; padding: 10px 20px; border: 1px solid #d880d1;border-radius: 15px;color: #d2ccff;">–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å: {{ selected_match.social }}</div>
        {% endif %}
    </div>
    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
    <div class="tooltip-overlay" id="tooltip">
        <div class="tooltip-box">
            <div class="close-tooltip" onclick="hide_window()" aria-label="–ó–∞–∫—Ä—ã—Ç—å" role="button" tabindex="0">&times;</div>
            <div id="tooltip-content" style="margin: 15px 5px"></div>
        </div>
    </div>
    <footer>
        <div class="footer-container">
            <div id="profile" class="footer-item"><img src="/static/img/icon_profile.png" alt="–ü—Ä–æ—Ñ–∏–ª—å" /></div>
            <div id="love_in_me" class="footer-item"><img src="/static/img/icon_love.png" alt="–õ—é–±–æ–≤—å" /></div>
            <div id="match" class="footer-item"><div class="footer-active"><img src="/static/img/icon_match.png" alt="–ú—ç—Ç—á–∏" /><span>–ú—ç—Ç—á–∏</span></div></div>
            <div id="speedometr" class="footer-item"><img src="/static/img/icon_speedometr.png" alt="–°–ø–∏–¥–æ–º–µ—Ç—Ä" /></div>
            <div id="payment" class="footer-item"><img src="/static/img/icon_tarif.png" alt="–¢–∞—Ä–∏—Ñ—ã" /></div>
        </div>
    </footer>
    <script>
        const match_id = {{ selected_match.tg_id | safe }};

        const tooltips = {
            "#sign": {{ selected_match.partner_sign_description | replace('\n', '<br>') | tojson }},
            "#compatibility": {{ selected_match.compatibility_description | replace('\n', '<br>') | tojson }},
            "#relation_type": {{ selected_match.relation_type_description | replace('\n', '<br>') | tojson }}
        };
    
        // –í—Å–µ —Å—Å—ã–ª–∫–∏ —Å –∫–ª–∞—Å—Å–æ–º question
        document.querySelectorAll('a.question').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                const id = this.getAttribute('href');
                const content = tooltips[id] || "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç";
                document.getElementById("tooltip-content").innerHTML = content;
                document.getElementById("tooltip").style.display = 'block';
            });
        });
    
        function hide_window() {
            document.getElementById("tooltip").style.display = 'none';
        }
    </script>
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
    <script src="/static/js/menu_control.js?v=1.0.0"></script>
    <script src="/static/js/selected_match_control.js?v=1.0.0"></script>
</body>
</html>
